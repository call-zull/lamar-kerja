{
    "sourceFile": "cdc/cetak_pdf.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 6,
            "patches": [
                {
                    "date": 1721780749886,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1721781001171,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n <?php\r\n-require_once __DIR__ . '/../../vendor/autoload.php'; // Pastikan path ke autoload.php benar\r\n+require_once __DIR__ . '/../../vendor/autoload.php'; // Correct path to autoload.php\r\n include '../../includes/db.php';\r\n \r\n use Mpdf\\Mpdf;\r\n \r\n@@ -132,25 +132,56 @@\n                     <td style=\"border: 1px solid black;\"><a href=\"' . $bukti_url . '\" target=\"_blank\">Lihat Bukti</a></td>\r\n                 </tr>';\r\n             }\r\n         } else {\r\n-            $html .= '<tr><td colspan=\"7\" style=\"border: 1px solid black; text-align: center;\">Tidak ada data sertifikasi yang tersedia.</td></tr>';\r\n+            $html .= '<tr><td colspan=\"7\" style=\"border: 1px solid black; text-align: center;\">Tidak ada sertifikasi yang ditemukan.</td></tr>';\r\n         }\r\n-        $html .= '</tbody>\r\n+        $html .= '\r\n+            </tbody>\r\n         </table>\r\n-\r\n+        <h4>Proyek</h4>\r\n+        <table style=\"width: 100%; border-collapse: collapse; border: 1px solid black; font-size: 12px;\">\r\n+            <thead>\r\n+                <tr>\r\n+                    <th style=\"border: 1px solid black;\">No</th>\r\n+                    <th style=\"border: 1px solid black;\">Judul Proyek</th>\r\n+                    <th style=\"border: 1px solid black;\">Deskripsi</th>\r\n+                    <th style=\"border: 1px solid black;\">Peran</th>\r\n+                    <th style=\"border: 1px solid black;\">Tanggal Mulai</th>\r\n+                    <th style=\"border: 1px solid black;\">Tanggal Selesai</th>\r\n+                    <th style=\"border: 1px solid black;\">Bukti</th>\r\n+                </tr>\r\n+            </thead>\r\n+            <tbody>';\r\n+        if (!empty($projects)) {\r\n+            foreach ($projects as $index => $project) {\r\n+                $bukti_url = htmlspecialchars(json_decode($project['bukti'])[0]);\r\n+                $html .= '<tr>\r\n+                    <td style=\"border: 1px solid black;\">' . ($index + 1) . '</td>\r\n+                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($project['judul_proyek']) . '</td>\r\n+                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($project['deskripsi']) . '</td>\r\n+                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($project['peran']) . '</td>\r\n+                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($project['tanggal_mulai']) . '</td>\r\n+                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($project['tanggal_selesai']) . '</td>\r\n+                    <td style=\"border: 1px solid black;\"><a href=\"' . $bukti_url . '\" target=\"_blank\">Lihat Bukti</a></td>\r\n+                </tr>';\r\n+            }\r\n+        } else {\r\n+            $html .= '<tr><td colspan=\"7\" style=\"border: 1px solid black; text-align: center;\">Tidak ada proyek yang ditemukan.</td></tr>';\r\n+        }\r\n+        $html .= '\r\n+            </tbody>\r\n+        </table>\r\n         <h4>Lomba</h4>\r\n         <table style=\"width: 100%; border-collapse: collapse; border: 1px solid black; font-size: 12px;\">\r\n             <thead>\r\n                 <tr>\r\n                     <th style=\"border: 1px solid black;\">No</th>\r\n                     <th style=\"border: 1px solid black;\">Nama Lomba</th>\r\n-                    <th style=\"border: 1px solid black;\">Prestasi</th>\r\n                     <th style=\"border: 1px solid black;\">Kategori</th>\r\n-                    <th style=\"border: 1px solid black;\">Tingkatan</th>\r\n-                    <th style=\"border: 1px solid black;\">Penyelenggara</th>\r\n-                    <th style=\"border: 1px solid black;\">Tanggal Pelaksanaan</th>\r\n-                    <th style=\"border: 1px solid black;\">Tempat Pelaksanaan</th>\r\n+                    <th style=\"border: 1px solid black;\">Tingkat</th>\r\n+                    <th style=\"border: 1px solid black;\">Tanggal Lomba</th>\r\n+                    <th style=\"border: 1px solid black;\">Pencapaian</th>\r\n                     <th style=\"border: 1px solid black;\">Bukti</th>\r\n                 </tr>\r\n             </thead>\r\n             <tbody>';\r\n@@ -159,36 +190,30 @@\n                 $bukti_url = htmlspecialchars(json_decode($competition['bukti'])[0]);\r\n                 $html .= '<tr>\r\n                     <td style=\"border: 1px solid black;\">' . ($index + 1) . '</td>\r\n                     <td style=\"border: 1px solid black;\">' . htmlspecialchars($competition['nama_lomba']) . '</td>\r\n-                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($competition['prestasi']) . '</td>\r\n                     <td style=\"border: 1px solid black;\">' . htmlspecialchars($competition['nama_kategori']) . '</td>\r\n                     <td style=\"border: 1px solid black;\">' . htmlspecialchars($competition['nama']) . '</td>\r\n-                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($competition['penyelenggara']) . '</td>\r\n-                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($competition['tanggal_pelaksanaan']) . '</td>\r\n-                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($competition['tempat_pelaksanaan']) . '</td>\r\n+                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($competition['tanggal_lomba']) . '</td>\r\n+                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($competition['pencapaian']) . '</td>\r\n                     <td style=\"border: 1px solid black;\"><a href=\"' . $bukti_url . '\" target=\"_blank\">Lihat Bukti</a></td>\r\n                 </tr>';\r\n             }\r\n         } else {\r\n-            $html .= '<tr><td colspan=\"9\" style=\"border: 1px solid black; text-align: center;\">Tidak ada data lomba yang tersedia.</td></tr>';\r\n+            $html .= '<tr><td colspan=\"7\" style=\"border: 1px solid black; text-align: center;\">Tidak ada lomba yang ditemukan.</td></tr>';\r\n         }\r\n-        $html .= '</tbody>\r\n+        $html .= '\r\n+            </tbody>\r\n         </table>\r\n-        \r\n         <h4>Pelatihan</h4>\r\n         <table style=\"width: 100%; border-collapse: collapse; border: 1px solid black; font-size: 12px;\">\r\n             <thead>\r\n                 <tr>\r\n                     <th style=\"border: 1px solid black;\">No</th>\r\n                     <th style=\"border: 1px solid black;\">Nama Pelatihan</th>\r\n-                    <th style=\"border: 1px solid black;\">Materi</th>\r\n-                    <th style=\"border: 1px solid black;\">Deskripsi</th>\r\n-                    <th style=\"border: 1px solid black;\">Tingkatan</th>\r\n-                    <th style=\"border: 1px solid black;\">Penyelenggara</th>\r\n+                    <th style=\"border: 1px solid black;\">Tingkat</th>\r\n                     <th style=\"border: 1px solid black;\">Tanggal Mulai</th>\r\n                     <th style=\"border: 1px solid black;\">Tanggal Selesai</th>\r\n-                    <th style=\"border: 1px solid black;\">Tempat Pelaksanaan</th>\r\n                     <th style=\"border: 1px solid black;\">Bukti</th>\r\n                 </tr>\r\n             </thead>\r\n             <tbody>';\r\n@@ -197,70 +222,27 @@\n                 $bukti_url = htmlspecialchars(json_decode($training['bukti'])[0]);\r\n                 $html .= '<tr>\r\n                     <td style=\"border: 1px solid black;\">' . ($index + 1) . '</td>\r\n                     <td style=\"border: 1px solid black;\">' . htmlspecialchars($training['nama_pelatihan']) . '</td>\r\n-                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($training['materi']) . '</td>\r\n-                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($training['deskripsi']) . '</td>\r\n                     <td style=\"border: 1px solid black;\">' . htmlspecialchars($training['nama']) . '</td>\r\n-                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($training['nama_lembaga']) . '</td>\r\n                     <td style=\"border: 1px solid black;\">' . htmlspecialchars($training['tanggal_mulai']) . '</td>\r\n                     <td style=\"border: 1px solid black;\">' . htmlspecialchars($training['tanggal_selesai']) . '</td>\r\n-                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($training['tempat_pelaksanaan']) . '</td>\r\n                     <td style=\"border: 1px solid black;\"><a href=\"' . $bukti_url . '\" target=\"_blank\">Lihat Bukti</a></td>\r\n                 </tr>';\r\n             }\r\n         } else {\r\n-            $html .= '<tr><td colspan=\"10\" style=\"border: 1px solid black; text-align: center;\">Tidak ada data pelatihan yang tersedia.</td></tr>';\r\n+            $html .= '<tr><td colspan=\"7\" style=\"border: 1px solid black; text-align: center;\">Tidak ada pelatihan yang ditemukan.</td></tr>';\r\n         }\r\n-        $html .= '</tbody>\r\n-        </table>\r\n-\r\n-        <h4>Proyek</h4>\r\n-        <table style=\"width: 100%; border-collapse: collapse; border: 1px solid black; font-size: 12px;\">\r\n-            <thead>\r\n-                <tr>\r\n-                    <th style=\"border: 1px solid black;\">No</th>\r\n-                    <th style=\"border: 1px solid black;\">Nama Proyek</th>\r\n-                    <th style=\"border: 1px solid black;\">Partner</th>\r\n-                    <th style=\"border: 1px solid black;\">Peran</th>\r\n-                    <th style=\"border: 1px solid black;\">Waktu Awal</th>\r\n-                    <th style=\"border: 1px solid black;\">Waktu Selesai</th>\r\n-                    <th style=\"border: 1px solid black;\">Tujuan Proyek</th>\r\n-                    <th style=\"border: 1px solid black;\">Bukti</th>\r\n-                </tr>\r\n-            </thead>\r\n-            <tbody>';\r\n-        if (!empty($projects)) {\r\n-            foreach ($projects as $index => $project) {\r\n-                $bukti_url = htmlspecialchars(json_decode($project['bukti'])[0]);\r\n-                $html .= '<tr>\r\n-                    <td style=\"border: 1px solid black;\">' . ($index + 1) . '</td>\r\n-                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($project['nama_proyek']) . '</td>\r\n-                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($project['partner']) . '</td>\r\n-                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($project['peran']) . '</td>\r\n-                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($project['waktu_awal']) . '</td>\r\n-                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($project['waktu_selesai']) . '</td>\r\n-                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($project['tujuan_proyek']) . '</td>\r\n-                    <td style=\"border: 1px solid black;\"><a href=\"' . $bukti_url . '\" target=\"_blank\">Lihat Bukti</a></td>\r\n-                </tr>';\r\n-            }\r\n-        } else {\r\n-            $html .= '<tr><td colspan=\"8\" style=\"border: 1px solid black; text-align: center;\">Tidak ada data proyek yang tersedia.</td></tr>';\r\n-        }\r\n-        $html .= '</tbody>\r\n+        $html .= '\r\n+            </tbody>\r\n         </table>';\r\n \r\n+        // Buat objek Mpdf dan cetak PDF\r\n         $mpdf = new Mpdf();\r\n         $mpdf->WriteHTML($html);\r\n-\r\n-        // Tambahkan header konten PDF\r\n-        header('Content-Type: application/pdf');\r\n-        header('Content-Disposition: inline; filename=\"laporan_proyek_mahasiswa.pdf\"');\r\n-\r\n-        $mpdf->Output();\r\n-        exit; // Pastikan skrip berhenti di sini\r\n-    } catch (PDOException $e) {\r\n-        echo \"Error: \" . $e->getMessage();\r\n\\ No newline at end of file\n-        die();\r\n+        $mpdf->Output('laporan_proyek_mahasiswa.pdf', 'I');\r\n+    } catch (Exception $e) {\r\n+        echo \"Terjadi kesalahan: \" . $e->getMessage();\r\n     }\r\n-}\r\n-?>\n+} else {\r\n+    echo \"ID mahasiswa tidak diberikan.\";\r\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1721781029030,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n <?php\r\n-require_once __DIR__ . '/../../vendor/autoload.php'; // Correct path to autoload.php\r\n+require_once __DIR__ . '/../vendor/autoload.php'; // Correct path to autoload.php\r\n include '../../includes/db.php';\r\n \r\n use Mpdf\\Mpdf;\r\n \r\n"
                },
                {
                    "date": 1721781062580,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,7 @@\n <?php\r\n-require_once __DIR__ . '/../vendor/autoload.php'; // Correct path to autoload.php\r\n-include '../../includes/db.php';\r\n+require_once __DIR__ . '../vendor/autoload.php'; // Correct path to autoload.php\r\n+include '../includes/db.php';\r\n \r\n use Mpdf\\Mpdf;\r\n \r\n if (isset($_GET['id'])) {\r\n"
                },
                {
                    "date": 1721781536903,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n <?php\r\n-require_once __DIR__ . '../vendor/autoload.php'; // Correct path to autoload.php\r\n+require  '../vendor/autoload.php'; // Correct path to autoload.php\r\n include '../includes/db.php';\r\n \r\n use Mpdf\\Mpdf;\r\n \r\n"
                },
                {
                    "date": 1721781788247,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -52,9 +52,8 @@\n         $training_stmt->execute([$mahasiswa_id]);\r\n         $trainings = $training_stmt->fetchAll(PDO::FETCH_ASSOC);\r\n \r\n         // Buat konten HTML untuk PDF\r\n-        //<img src=\"../../assets/images/logo_poliban.png\" style=\"height: 90px; margin-right: 20px;\">\r\n         $html = '\r\n         <style>\r\n             .label {\r\n                 display: inline-block;\r\n@@ -63,21 +62,20 @@\n             .value {\r\n                 display: inline-block;\r\n             }\r\n         </style>\r\n-   <div style=\"margin-bottom: 20px;\">\r\n-    <div style=\"display: flex; align-items: center; justify-content: center;\">\r\n-       \r\n-        <div style=\"text-align: center;\">\r\n-            <h3 style=\"margin: 0;\">KEMENTRIAN PENDIDIKAN, KEBUDAYAAN,</h3>\r\n-            <h3 style=\"margin: 0;\">RISET, DAN TEKNOLOGI</h3>\r\n-            <h3 style=\"margin: 0;\">POLITEKNIK NEGERI BANJARMASIN</h3>\r\n-            <p style=\"margin: 0;\">Jl. Brigjen H. Hasan Basri (Komplek Unlam) Kayutangi, Banjarmasin 70123</p>\r\n-            <p style=\"margin: 0;\">Telp: (0511) 3305052, 3308245, Fax: (0511-3308244, 3308245) E-mail: info@poliban.ac.id</p>\r\n+        <div style=\"margin-bottom: 20px;\">\r\n+            <div style=\"display: flex; align-items: center; justify-content: center;\">\r\n+                <div style=\"text-align: center;\">\r\n+                    <h3 style=\"margin: 0;\">KEMENTRIAN PENDIDIKAN, KEBUDAYAAN,</h3>\r\n+                    <h3 style=\"margin: 0;\">RISET, DAN TEKNOLOGI</h3>\r\n+                    <h3 style=\"margin: 0;\">POLITEKNIK NEGERI BANJARMASIN</h3>\r\n+                    <p style=\"margin: 0;\">Jl. Brigjen H. Hasan Basri (Komplek Unlam) Kayutangi, Banjarmasin 70123</p>\r\n+                    <p style=\"margin: 0;\">Telp: (0511) 3305052, 3308245, Fax: (0511-3308244, 3308245) E-mail: info@poliban.ac.id</p>\r\n+                </div>\r\n+            </div>\r\n+            <hr style=\"border: 2px solid black; margin-top: 10px;\">\r\n         </div>\r\n-    </div>\r\n-    <hr style=\"border: 2px solid black; margin-top: 10px;\">\r\n-</div>\r\n         <h4 style=\"text-align: center; margin-top: 10px;\">LAPORAN PROYEK MAHASISWA</h4>\r\n         <table style=\"width: 100%; border-collapse: collapse;\">\r\n             <tr>\r\n                 <td class=\"label\">NIM</td>\r\n@@ -170,17 +168,17 @@\n         }\r\n         $html .= '\r\n             </tbody>\r\n         </table>\r\n-        <h4>Lomba</h4>\r\n+        <h4>Kompetisi</h4>\r\n         <table style=\"width: 100%; border-collapse: collapse; border: 1px solid black; font-size: 12px;\">\r\n             <thead>\r\n                 <tr>\r\n                     <th style=\"border: 1px solid black;\">No</th>\r\n                     <th style=\"border: 1px solid black;\">Nama Lomba</th>\r\n                     <th style=\"border: 1px solid black;\">Kategori</th>\r\n                     <th style=\"border: 1px solid black;\">Tingkat</th>\r\n-                    <th style=\"border: 1px solid black;\">Tanggal Lomba</th>\r\n+                    <th style=\"border: 1px solid black;\">Tanggal</th>\r\n                     <th style=\"border: 1px solid black;\">Pencapaian</th>\r\n                     <th style=\"border: 1px solid black;\">Bukti</th>\r\n                 </tr>\r\n             </thead>\r\n@@ -192,15 +190,15 @@\n                     <td style=\"border: 1px solid black;\">' . ($index + 1) . '</td>\r\n                     <td style=\"border: 1px solid black;\">' . htmlspecialchars($competition['nama_lomba']) . '</td>\r\n                     <td style=\"border: 1px solid black;\">' . htmlspecialchars($competition['nama_kategori']) . '</td>\r\n                     <td style=\"border: 1px solid black;\">' . htmlspecialchars($competition['nama']) . '</td>\r\n-                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($competition['tanggal_lomba']) . '</td>\r\n+                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($competition['tanggal']) . '</td>\r\n                     <td style=\"border: 1px solid black;\">' . htmlspecialchars($competition['pencapaian']) . '</td>\r\n                     <td style=\"border: 1px solid black;\"><a href=\"' . $bukti_url . '\" target=\"_blank\">Lihat Bukti</a></td>\r\n                 </tr>';\r\n             }\r\n         } else {\r\n-            $html .= '<tr><td colspan=\"7\" style=\"border: 1px solid black; text-align: center;\">Tidak ada lomba yang ditemukan.</td></tr>';\r\n+            $html .= '<tr><td colspan=\"7\" style=\"border: 1px solid black; text-align: center;\">Tidak ada kompetisi yang ditemukan.</td></tr>';\r\n         }\r\n         $html .= '\r\n             </tbody>\r\n         </table>\r\n@@ -235,14 +233,16 @@\n         $html .= '\r\n             </tbody>\r\n         </table>';\r\n \r\n-        // Buat objek Mpdf dan cetak PDF\r\n+        // Buat instance MPDF dan tambahkan konten HTML\r\n         $mpdf = new Mpdf();\r\n         $mpdf->WriteHTML($html);\r\n-        $mpdf->Output('laporan_proyek_mahasiswa.pdf', 'I');\r\n-    } catch (Exception $e) {\r\n-        echo \"Terjadi kesalahan: \" . $e->getMessage();\r\n+        $mpdf->Output('laporan_proyek_mahasiswa.pdf', \\Mpdf\\Output\\Destination::INLINE);\r\n+\r\n+    } catch (PDOException $e) {\r\n\\ No newline at end of file\n+        die(\"Terjadi kesalahan: \" . $e->getMessage());\r\n     }\r\n } else {\r\n-    echo \"ID mahasiswa tidak diberikan.\";\r\n-}\n+    die(\"ID mahasiswa tidak ditemukan.\");\r\n+}\r\n+?>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1721781816158,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -52,8 +52,9 @@\n         $training_stmt->execute([$mahasiswa_id]);\r\n         $trainings = $training_stmt->fetchAll(PDO::FETCH_ASSOC);\r\n \r\n         // Buat konten HTML untuk PDF\r\n+        //<img src=\"../../assets/images/logo_poliban.png\" style=\"height: 90px; margin-right: 20px;\">\r\n         $html = '\r\n         <style>\r\n             .label {\r\n                 display: inline-block;\r\n@@ -62,20 +63,21 @@\n             .value {\r\n                 display: inline-block;\r\n             }\r\n         </style>\r\n-        <div style=\"margin-bottom: 20px;\">\r\n-            <div style=\"display: flex; align-items: center; justify-content: center;\">\r\n-                <div style=\"text-align: center;\">\r\n-                    <h3 style=\"margin: 0;\">KEMENTRIAN PENDIDIKAN, KEBUDAYAAN,</h3>\r\n-                    <h3 style=\"margin: 0;\">RISET, DAN TEKNOLOGI</h3>\r\n-                    <h3 style=\"margin: 0;\">POLITEKNIK NEGERI BANJARMASIN</h3>\r\n-                    <p style=\"margin: 0;\">Jl. Brigjen H. Hasan Basri (Komplek Unlam) Kayutangi, Banjarmasin 70123</p>\r\n-                    <p style=\"margin: 0;\">Telp: (0511) 3305052, 3308245, Fax: (0511-3308244, 3308245) E-mail: info@poliban.ac.id</p>\r\n-                </div>\r\n-            </div>\r\n-            <hr style=\"border: 2px solid black; margin-top: 10px;\">\r\n+   <div style=\"margin-bottom: 20px;\">\r\n+    <div style=\"display: flex; align-items: center; justify-content: center;\">\r\n+       \r\n+        <div style=\"text-align: center;\">\r\n+            <h3 style=\"margin: 0;\">KEMENTRIAN PENDIDIKAN, KEBUDAYAAN,</h3>\r\n+            <h3 style=\"margin: 0;\">RISET, DAN TEKNOLOGI</h3>\r\n+            <h3 style=\"margin: 0;\">POLITEKNIK NEGERI BANJARMASIN</h3>\r\n+            <p style=\"margin: 0;\">Jl. Brigjen H. Hasan Basri (Komplek Unlam) Kayutangi, Banjarmasin 70123</p>\r\n+            <p style=\"margin: 0;\">Telp: (0511) 3305052, 3308245, Fax: (0511-3308244, 3308245) E-mail: info@poliban.ac.id</p>\r\n         </div>\r\n+    </div>\r\n+    <hr style=\"border: 2px solid black; margin-top: 10px;\">\r\n+</div>\r\n         <h4 style=\"text-align: center; margin-top: 10px;\">LAPORAN PROYEK MAHASISWA</h4>\r\n         <table style=\"width: 100%; border-collapse: collapse;\">\r\n             <tr>\r\n                 <td class=\"label\">NIM</td>\r\n@@ -168,17 +170,17 @@\n         }\r\n         $html .= '\r\n             </tbody>\r\n         </table>\r\n-        <h4>Kompetisi</h4>\r\n+        <h4>Lomba</h4>\r\n         <table style=\"width: 100%; border-collapse: collapse; border: 1px solid black; font-size: 12px;\">\r\n             <thead>\r\n                 <tr>\r\n                     <th style=\"border: 1px solid black;\">No</th>\r\n                     <th style=\"border: 1px solid black;\">Nama Lomba</th>\r\n                     <th style=\"border: 1px solid black;\">Kategori</th>\r\n                     <th style=\"border: 1px solid black;\">Tingkat</th>\r\n-                    <th style=\"border: 1px solid black;\">Tanggal</th>\r\n+                    <th style=\"border: 1px solid black;\">Tanggal Lomba</th>\r\n                     <th style=\"border: 1px solid black;\">Pencapaian</th>\r\n                     <th style=\"border: 1px solid black;\">Bukti</th>\r\n                 </tr>\r\n             </thead>\r\n@@ -190,15 +192,15 @@\n                     <td style=\"border: 1px solid black;\">' . ($index + 1) . '</td>\r\n                     <td style=\"border: 1px solid black;\">' . htmlspecialchars($competition['nama_lomba']) . '</td>\r\n                     <td style=\"border: 1px solid black;\">' . htmlspecialchars($competition['nama_kategori']) . '</td>\r\n                     <td style=\"border: 1px solid black;\">' . htmlspecialchars($competition['nama']) . '</td>\r\n-                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($competition['tanggal']) . '</td>\r\n+                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($competition['tanggal_lomba']) . '</td>\r\n                     <td style=\"border: 1px solid black;\">' . htmlspecialchars($competition['pencapaian']) . '</td>\r\n                     <td style=\"border: 1px solid black;\"><a href=\"' . $bukti_url . '\" target=\"_blank\">Lihat Bukti</a></td>\r\n                 </tr>';\r\n             }\r\n         } else {\r\n-            $html .= '<tr><td colspan=\"7\" style=\"border: 1px solid black; text-align: center;\">Tidak ada kompetisi yang ditemukan.</td></tr>';\r\n+            $html .= '<tr><td colspan=\"7\" style=\"border: 1px solid black; text-align: center;\">Tidak ada lomba yang ditemukan.</td></tr>';\r\n         }\r\n         $html .= '\r\n             </tbody>\r\n         </table>\r\n@@ -233,16 +235,14 @@\n         $html .= '\r\n             </tbody>\r\n         </table>';\r\n \r\n-        // Buat instance MPDF dan tambahkan konten HTML\r\n+        // Buat objek Mpdf dan cetak PDF\r\n         $mpdf = new Mpdf();\r\n         $mpdf->WriteHTML($html);\r\n-        $mpdf->Output('laporan_proyek_mahasiswa.pdf', \\Mpdf\\Output\\Destination::INLINE);\r\n-\r\n-    } catch (PDOException $e) {\r\n-        die(\"Terjadi kesalahan: \" . $e->getMessage());\r\n+        $mpdf->Output('laporan_proyek_mahasiswa.pdf', 'I');\r\n+    } catch (Exception $e) {\r\n+        echo \"Terjadi kesalahan: \" . $e->getMessage();\r\n     }\r\n\\ No newline at end of file\n } else {\r\n-    die(\"ID mahasiswa tidak ditemukan.\");\r\n-}\r\n-?>\n+    echo \"ID mahasiswa tidak diberikan.\";\r\n+}\n\\ No newline at end of file\n"
                }
            ],
            "date": 1721780749886,
            "name": "Commit-0",
            "content": "<?php\r\nrequire_once __DIR__ . '/../../vendor/autoload.php'; // Pastikan path ke autoload.php benar\r\ninclude '../../includes/db.php';\r\n\r\nuse Mpdf\\Mpdf;\r\n\r\nif (isset($_GET['id'])) {\r\n    $mahasiswa_id = $_GET['id'];\r\n\r\n    try {\r\n        // Fetch student details\r\n        $student_sql = \"SELECT m.nim, m.nama_mahasiswa, j.nama_jurusan AS jurusan, p.nama_prodi AS prodi, m.tahun_masuk, m.status\r\n                        FROM mahasiswas m\r\n                        JOIN prodis p ON m.prodi_id = p.id\r\n                        JOIN jurusans j ON m.jurusan_id = j.id\r\n                        WHERE m.id = ?\";\r\n        $student_stmt = $pdo->prepare($student_sql);\r\n        $student_stmt->execute([$mahasiswa_id]);\r\n        $student = $student_stmt->fetch(PDO::FETCH_ASSOC);\r\n\r\n        // Fetch projects\r\n        $project_sql = \"SELECT * FROM proyek WHERE mahasiswa_id = ?\";\r\n        $project_stmt = $pdo->prepare($project_sql);\r\n        $project_stmt->execute([$mahasiswa_id]);\r\n        $projects = $project_stmt->fetchAll(PDO::FETCH_ASSOC);\r\n\r\n        // Fetch certifications\r\n        $certification_sql = \"SELECT s.*, l.nama_lembaga \r\n                              FROM sertifikasi s\r\n                              JOIN penyelenggara_sertifikasi l ON s.lembaga_id = l.id\r\n                              WHERE s.mahasiswa_id = ?\";\r\n        $certification_stmt = $pdo->prepare($certification_sql);\r\n        $certification_stmt->execute([$mahasiswa_id]);\r\n        $certifications = $certification_stmt->fetchAll(PDO::FETCH_ASSOC);\r\n\r\n        // Fetch competitions\r\n        $competition_sql = \"SELECT l.*, k.nama_kategori, t.nama\r\n                            FROM lomba l\r\n                            JOIN kategori k ON l.id_kategori = k.id\r\n                            JOIN tingkatan t ON l.id_tingkatan = t.id\r\n                            WHERE l.mahasiswa_id = ?\";\r\n        $competition_stmt = $pdo->prepare($competition_sql);\r\n        $competition_stmt->execute([$mahasiswa_id]);\r\n        $competitions = $competition_stmt->fetchAll(PDO::FETCH_ASSOC);\r\n\r\n        // Fetch trainings\r\n        $training_sql = \"SELECT p.*, t.nama\r\n                         FROM pelatihan p\r\n                         JOIN tingkatan t ON p.id_tingkatan = t.id\r\n                         WHERE p.mahasiswa_id = ?\";\r\n        $training_stmt = $pdo->prepare($training_sql);\r\n        $training_stmt->execute([$mahasiswa_id]);\r\n        $trainings = $training_stmt->fetchAll(PDO::FETCH_ASSOC);\r\n\r\n        // Buat konten HTML untuk PDF\r\n        //<img src=\"../../assets/images/logo_poliban.png\" style=\"height: 90px; margin-right: 20px;\">\r\n        $html = '\r\n        <style>\r\n            .label {\r\n                display: inline-block;\r\n                width: 120px;\r\n            }\r\n            .value {\r\n                display: inline-block;\r\n            }\r\n        </style>\r\n   <div style=\"margin-bottom: 20px;\">\r\n    <div style=\"display: flex; align-items: center; justify-content: center;\">\r\n       \r\n        <div style=\"text-align: center;\">\r\n            <h3 style=\"margin: 0;\">KEMENTRIAN PENDIDIKAN, KEBUDAYAAN,</h3>\r\n            <h3 style=\"margin: 0;\">RISET, DAN TEKNOLOGI</h3>\r\n            <h3 style=\"margin: 0;\">POLITEKNIK NEGERI BANJARMASIN</h3>\r\n            <p style=\"margin: 0;\">Jl. Brigjen H. Hasan Basri (Komplek Unlam) Kayutangi, Banjarmasin 70123</p>\r\n            <p style=\"margin: 0;\">Telp: (0511) 3305052, 3308245, Fax: (0511-3308244, 3308245) E-mail: info@poliban.ac.id</p>\r\n        </div>\r\n    </div>\r\n    <hr style=\"border: 2px solid black; margin-top: 10px;\">\r\n</div>\r\n        <h4 style=\"text-align: center; margin-top: 10px;\">LAPORAN PROYEK MAHASISWA</h4>\r\n        <table style=\"width: 100%; border-collapse: collapse;\">\r\n            <tr>\r\n                <td class=\"label\">NIM</td>\r\n                <td class=\"value\">: ' . htmlspecialchars($student['nim']) . '</td>\r\n            </tr>\r\n            <tr>\r\n                <td class=\"label\">Nama</td>\r\n                <td class=\"value\">: ' . htmlspecialchars($student['nama_mahasiswa']) . '</td>\r\n            </tr>\r\n            <tr>\r\n                <td class=\"label\">Jurusan</td>\r\n                <td class=\"value\">: ' . htmlspecialchars($student['jurusan']) . '</td>\r\n            </tr>\r\n            <tr>\r\n                <td class=\"label\">Prodi</td>\r\n                <td class=\"value\">: ' . htmlspecialchars($student['prodi']) . '</td>\r\n            </tr>\r\n            <tr>\r\n                <td class=\"label\">Tahun Masuk</td>\r\n                <td class=\"value\">: ' . htmlspecialchars($student['tahun_masuk']) . '</td>\r\n            </tr>\r\n            <tr>\r\n                <td class=\"label\">Status</td>\r\n                <td class=\"value\">: ' . htmlspecialchars($student['status']) . '</td>\r\n            </tr>\r\n        </table>\r\n        <hr>\r\n        <h4>Sertifikasi</h4>\r\n        <table style=\"width: 100%; border-collapse: collapse; border: 1px solid black; font-size: 12px;\">\r\n            <thead>\r\n                <tr>\r\n                    <th style=\"border: 1px solid black;\">No</th>\r\n                    <th style=\"border: 1px solid black;\">Nama Sertifikasi</th>\r\n                    <th style=\"border: 1px solid black;\">Nomor SK</th>\r\n                    <th style=\"border: 1px solid black;\">Lembaga</th>\r\n                    <th style=\"border: 1px solid black;\">Tanggal Diperoleh</th>\r\n                    <th style=\"border: 1px solid black;\">Tanggal Kadaluarsa</th>\r\n                    <th style=\"border: 1px solid black;\">Bukti</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>';\r\n        if (!empty($certifications)) {\r\n            foreach ($certifications as $index => $certification) {\r\n                $bukti_url = htmlspecialchars(json_decode($certification['bukti'])[0]);\r\n                $html .= '<tr>\r\n                    <td style=\"border: 1px solid black;\">' . ($index + 1) . '</td>\r\n                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($certification['nama_sertifikasi']) . '</td>\r\n                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($certification['nomor_sk']) . '</td>\r\n                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($certification['nama_lembaga']) . '</td>\r\n                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($certification['tanggal_diperoleh']) . '</td>\r\n                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($certification['tanggal_kadaluarsa']) . '</td>\r\n                    <td style=\"border: 1px solid black;\"><a href=\"' . $bukti_url . '\" target=\"_blank\">Lihat Bukti</a></td>\r\n                </tr>';\r\n            }\r\n        } else {\r\n            $html .= '<tr><td colspan=\"7\" style=\"border: 1px solid black; text-align: center;\">Tidak ada data sertifikasi yang tersedia.</td></tr>';\r\n        }\r\n        $html .= '</tbody>\r\n        </table>\r\n\r\n        <h4>Lomba</h4>\r\n        <table style=\"width: 100%; border-collapse: collapse; border: 1px solid black; font-size: 12px;\">\r\n            <thead>\r\n                <tr>\r\n                    <th style=\"border: 1px solid black;\">No</th>\r\n                    <th style=\"border: 1px solid black;\">Nama Lomba</th>\r\n                    <th style=\"border: 1px solid black;\">Prestasi</th>\r\n                    <th style=\"border: 1px solid black;\">Kategori</th>\r\n                    <th style=\"border: 1px solid black;\">Tingkatan</th>\r\n                    <th style=\"border: 1px solid black;\">Penyelenggara</th>\r\n                    <th style=\"border: 1px solid black;\">Tanggal Pelaksanaan</th>\r\n                    <th style=\"border: 1px solid black;\">Tempat Pelaksanaan</th>\r\n                    <th style=\"border: 1px solid black;\">Bukti</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>';\r\n        if (!empty($competitions)) {\r\n            foreach ($competitions as $index => $competition) {\r\n                $bukti_url = htmlspecialchars(json_decode($competition['bukti'])[0]);\r\n                $html .= '<tr>\r\n                    <td style=\"border: 1px solid black;\">' . ($index + 1) . '</td>\r\n                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($competition['nama_lomba']) . '</td>\r\n                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($competition['prestasi']) . '</td>\r\n                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($competition['nama_kategori']) . '</td>\r\n                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($competition['nama']) . '</td>\r\n                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($competition['penyelenggara']) . '</td>\r\n                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($competition['tanggal_pelaksanaan']) . '</td>\r\n                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($competition['tempat_pelaksanaan']) . '</td>\r\n                    <td style=\"border: 1px solid black;\"><a href=\"' . $bukti_url . '\" target=\"_blank\">Lihat Bukti</a></td>\r\n                </tr>';\r\n            }\r\n        } else {\r\n            $html .= '<tr><td colspan=\"9\" style=\"border: 1px solid black; text-align: center;\">Tidak ada data lomba yang tersedia.</td></tr>';\r\n        }\r\n        $html .= '</tbody>\r\n        </table>\r\n        \r\n        <h4>Pelatihan</h4>\r\n        <table style=\"width: 100%; border-collapse: collapse; border: 1px solid black; font-size: 12px;\">\r\n            <thead>\r\n                <tr>\r\n                    <th style=\"border: 1px solid black;\">No</th>\r\n                    <th style=\"border: 1px solid black;\">Nama Pelatihan</th>\r\n                    <th style=\"border: 1px solid black;\">Materi</th>\r\n                    <th style=\"border: 1px solid black;\">Deskripsi</th>\r\n                    <th style=\"border: 1px solid black;\">Tingkatan</th>\r\n                    <th style=\"border: 1px solid black;\">Penyelenggara</th>\r\n                    <th style=\"border: 1px solid black;\">Tanggal Mulai</th>\r\n                    <th style=\"border: 1px solid black;\">Tanggal Selesai</th>\r\n                    <th style=\"border: 1px solid black;\">Tempat Pelaksanaan</th>\r\n                    <th style=\"border: 1px solid black;\">Bukti</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>';\r\n        if (!empty($trainings)) {\r\n            foreach ($trainings as $index => $training) {\r\n                $bukti_url = htmlspecialchars(json_decode($training['bukti'])[0]);\r\n                $html .= '<tr>\r\n                    <td style=\"border: 1px solid black;\">' . ($index + 1) . '</td>\r\n                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($training['nama_pelatihan']) . '</td>\r\n                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($training['materi']) . '</td>\r\n                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($training['deskripsi']) . '</td>\r\n                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($training['nama']) . '</td>\r\n                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($training['nama_lembaga']) . '</td>\r\n                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($training['tanggal_mulai']) . '</td>\r\n                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($training['tanggal_selesai']) . '</td>\r\n                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($training['tempat_pelaksanaan']) . '</td>\r\n                    <td style=\"border: 1px solid black;\"><a href=\"' . $bukti_url . '\" target=\"_blank\">Lihat Bukti</a></td>\r\n                </tr>';\r\n            }\r\n        } else {\r\n            $html .= '<tr><td colspan=\"10\" style=\"border: 1px solid black; text-align: center;\">Tidak ada data pelatihan yang tersedia.</td></tr>';\r\n        }\r\n        $html .= '</tbody>\r\n        </table>\r\n\r\n        <h4>Proyek</h4>\r\n        <table style=\"width: 100%; border-collapse: collapse; border: 1px solid black; font-size: 12px;\">\r\n            <thead>\r\n                <tr>\r\n                    <th style=\"border: 1px solid black;\">No</th>\r\n                    <th style=\"border: 1px solid black;\">Nama Proyek</th>\r\n                    <th style=\"border: 1px solid black;\">Partner</th>\r\n                    <th style=\"border: 1px solid black;\">Peran</th>\r\n                    <th style=\"border: 1px solid black;\">Waktu Awal</th>\r\n                    <th style=\"border: 1px solid black;\">Waktu Selesai</th>\r\n                    <th style=\"border: 1px solid black;\">Tujuan Proyek</th>\r\n                    <th style=\"border: 1px solid black;\">Bukti</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>';\r\n        if (!empty($projects)) {\r\n            foreach ($projects as $index => $project) {\r\n                $bukti_url = htmlspecialchars(json_decode($project['bukti'])[0]);\r\n                $html .= '<tr>\r\n                    <td style=\"border: 1px solid black;\">' . ($index + 1) . '</td>\r\n                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($project['nama_proyek']) . '</td>\r\n                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($project['partner']) . '</td>\r\n                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($project['peran']) . '</td>\r\n                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($project['waktu_awal']) . '</td>\r\n                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($project['waktu_selesai']) . '</td>\r\n                    <td style=\"border: 1px solid black;\">' . htmlspecialchars($project['tujuan_proyek']) . '</td>\r\n                    <td style=\"border: 1px solid black;\"><a href=\"' . $bukti_url . '\" target=\"_blank\">Lihat Bukti</a></td>\r\n                </tr>';\r\n            }\r\n        } else {\r\n            $html .= '<tr><td colspan=\"8\" style=\"border: 1px solid black; text-align: center;\">Tidak ada data proyek yang tersedia.</td></tr>';\r\n        }\r\n        $html .= '</tbody>\r\n        </table>';\r\n\r\n        $mpdf = new Mpdf();\r\n        $mpdf->WriteHTML($html);\r\n\r\n        // Tambahkan header konten PDF\r\n        header('Content-Type: application/pdf');\r\n        header('Content-Disposition: inline; filename=\"laporan_proyek_mahasiswa.pdf\"');\r\n\r\n        $mpdf->Output();\r\n        exit; // Pastikan skrip berhenti di sini\r\n    } catch (PDOException $e) {\r\n        echo \"Error: \" . $e->getMessage();\r\n        die();\r\n    }\r\n}\r\n?>"
        }
    ]
}