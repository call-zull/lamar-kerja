{
    "sourceFile": "perusahaan/lowongan_kerja.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1721747831610,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1721748411769,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -170,9 +170,9 @@\n                         </button>\r\n                     </div>\r\n                     <?php unset($_SESSION['error_message']); // Clear error message after displaying ?>\r\n                     <?php endif; ?>\r\n-                    </div>\r\n+                </div>\r\n             </div>\r\n             <Fig></Fig>\r\n \r\n             <section class=\"content\">\r\n@@ -208,46 +208,46 @@\n                                         </tr>\r\n                                     </thead>\r\n                                     <tbody>\r\n                                         <?php\r\n-    if ($jobs) {\r\n-        $no = 1;\r\n-        foreach ($jobs as $row) {\r\n-            echo \"<tr>\";\r\n-            echo \"<td>\" . $no . \"</td>\";\r\n-            echo \"<td>\" . htmlspecialchars($row['nama_pekerjaan']) . \"</td>\";\r\n-            echo \"<td>\" . htmlspecialchars($row['posisi']) . \"</td>\";\r\n-            echo \"<td>\" . htmlspecialchars($row['kualifikasi']) . \"</td>\";\r\n-            echo \"<td>\" . htmlspecialchars($row['jobdesk']) . \"</td>\";\r\n-            echo \"<td>\" . htmlspecialchars($row['range_gajih']) . \"</td>\";\r\n-            echo \"<td>\" . htmlspecialchars($row['jenis_kerja']) . \"</td>\";\r\n-            echo \"<td>\" . htmlspecialchars($row['sistem_kerja']) . \"</td>\";\r\n+                                        if ($jobs) {\r\n+                                            $no = 1;\r\n+                                            foreach ($jobs as $row) {\r\n+                                                echo \"<tr>\";\r\n+                                                echo \"<td>\" . $no . \"</td>\";\r\n+                                                echo \"<td>\" . htmlspecialchars($row['nama_pekerjaan']) . \"</td>\";\r\n+                                                echo \"<td>\" . htmlspecialchars($row['posisi']) . \"</td>\";\r\n+                                                echo \"<td>\" . htmlspecialchars($row['kualifikasi']) . \"</td>\";\r\n+                                                echo \"<td>\" . htmlspecialchars($row['jobdesk']) . \"</td>\";\r\n+                                                echo \"<td>\" . htmlspecialchars($row['range_gajih']) . \"</td>\";\r\n+                                                echo \"<td>\" . htmlspecialchars($row['jenis_kerja']) . \"</td>\";\r\n+                                                echo \"<td>\" . htmlspecialchars($row['sistem_kerja']) . \"</td>\";\r\n \r\n-            // Decode JSON prodi dan keahlian\r\n-            $prodi = !empty($row['prodi']) ? json_decode($row['prodi'], true) : [];\r\n-            $keahlian = !empty($row['keahlian']) ? json_decode($row['keahlian'], true) : [];\r\n+                                                // Decode JSON prodi dan keahlian\r\n+                                                $prodi = !empty($row['prodi']) ? json_decode($row['prodi'], true) : [];\r\n+                                                $keahlian = !empty($row['keahlian']) ? json_decode($row['keahlian'], true) : [];\r\n \r\n-            if (is_array($prodi)) {\r\n-                $prodi_list = array_map(function ($item) {\r\n-                    return $item['value'];\r\n-                }, $prodi);\r\n-                echo \"<td>\" . htmlspecialchars(implode(', ', $prodi_list)) . \"</td>\";\r\n-            } else {\r\n-                echo \"<td>-</td>\"; // Tampilkan tanda \"-\" jika tidak ada data\r\n-            }\r\n+                                                if (is_array($prodi)) {\r\n+                                                    $prodi_list = array_map(function ($item) {\r\n+                                                        return $item['value'];\r\n+                                                    }, $prodi);\r\n+                                                    echo \"<td>\" . htmlspecialchars(implode(', ', $prodi_list)) . \"</td>\";\r\n+                                                } else {\r\n+                                                    echo \"<td>-</td>\"; // Tampilkan tanda \"-\" jika tidak ada data\r\n+                                                }\r\n \r\n-            if (is_array($keahlian)) {\r\n-                $keahlian_list = array_map(function ($item) {\r\n-                    return $item['value'];\r\n-                }, $keahlian);\r\n-                echo \"<td>\" . htmlspecialchars(implode(', ', $keahlian_list)) . \"</td>\";\r\n-            } else {\r\n-                echo \"<td>-</td>\"; // Tampilkan tanda \"-\" jika tidak ada data\r\n-            }\r\n-            \r\n-            echo \"<td>\" . htmlspecialchars($row['batas_waktu']) . \"</td>\";\r\n-            echo \"<td>\" . htmlspecialchars($row['tanggal_posting']) . \"</td>\";\r\n-            echo \"<td>\r\n+                                                if (is_array($keahlian)) {\r\n+                                                    $keahlian_list = array_map(function ($item) {\r\n+                                                        return $item['value'];\r\n+                                                    }, $keahlian);\r\n+                                                    echo \"<td>\" . htmlspecialchars(implode(', ', $keahlian_list)) . \"</td>\";\r\n+                                                } else {\r\n+                                                    echo \"<td>-</td>\"; // Tampilkan tanda \"-\" jika tidak ada data\r\n+                                                }\r\n+\r\n+                                                echo \"<td>\" . htmlspecialchars($row['batas_waktu']) . \"</td>\";\r\n+                                                echo \"<td>\" . htmlspecialchars($row['tanggal_posting']) . \"</td>\";\r\n+                                                echo \"<td>\r\n                 <button class='btn btn-sm btn-warning editBtn' data-toggle='modal' data-target='#modalEdit' \r\n                     data-id='\" . $row['id'] . \"' \r\n                     data-nama='\" . htmlspecialchars($row['nama_pekerjaan']) . \"' \r\n                     data-posisi='\" . htmlspecialchars($row['posisi']) . \"'\r\n@@ -261,15 +261,15 @@\n                     data-waktu='\" . htmlspecialchars($row['batas_waktu']) . \"'>Edit</button>\r\n                 <button class='btn btn-sm btn-danger deleteBtn' data-toggle='modal' data-target='#modalHapus' data-id='\" . $row['id'] . \"'>Hapus</button>\r\n                 <button class='btn btn-sm btn-info lihatPelamarBtn' data-toggle='modal' data-target='#modalPelamar' data-id='\" . $row['id'] . \"'>Lihat Pelamar</button>\r\n             </td>\";\r\n-            echo \"</tr>\";\r\n-            $no++;\r\n-        }\r\n-    } else {\r\n-        echo \"<tr><td colspan='13'>Tidak ada data</td></tr>\";\r\n-    }\r\n-    ?>\r\n+                                                echo \"</tr>\";\r\n+                                                $no++;\r\n+                                            }\r\n+                                        } else {\r\n+                                            echo \"<tr><td colspan='13'>Tidak ada data</td></tr>\";\r\n+                                        }\r\n+                                        ?>\r\n                                     </tbody>\r\n \r\n                                 </table>\r\n                             </div>\r\n@@ -426,9 +426,9 @@\n                             </div>\r\n                         </div>\r\n                         <div class=\"modal-footer\">\r\n                             <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\r\n-                            <button type=\"submit\" class=\"btn btn-primary\">Simpan Perubahan</button>\r\n+                            <button type=\"submit\" class=\"btn btn-primary\">Save changes</button>\r\n                         </div>\r\n                     </form>\r\n                 </div>\r\n             </div>\r\n@@ -548,16 +548,16 @@\n     var prodiInput = document.querySelector('#prodi');\r\n     var tagifyProdi = new Tagify(prodiInput, {\r\n         whitelist: [\r\n             <?php\r\n-            $sql_prodi = \"SELECT id, nama_prodi FROM prodis\";\r\n-            $stmt_prodi = $pdo->query($sql_prodi);\r\n-            $prodiArray = [];\r\n-            while ($prodi = $stmt_prodi->fetch(PDO::FETCH_ASSOC)) {\r\n-                $prodiArray[] = \"{id: '\" . $prodi['id'] . \"', value: '\" . $prodi['nama_prodi'] . \"'}\";\r\n-            }\r\n-            echo implode(\",\", $prodiArray);\r\n-            ?>\r\n+                $sql_prodi = \"SELECT id, nama_prodi FROM prodis\";\r\n+                $stmt_prodi = $pdo->query($sql_prodi);\r\n+                $prodiArray = [];\r\n+                while ($prodi = $stmt_prodi->fetch(PDO::FETCH_ASSOC)) {\r\n+                    $prodiArray[] = \"{id: '\" . $prodi['id'] . \"', value: '\" . $prodi['nama_prodi'] . \"'}\";\r\n+                }\r\n+                echo implode(\",\", $prodiArray);\r\n+                ?>\r\n         ],\r\n         dropdown: {\r\n             maxItems: 20,\r\n             classname: \"tags-look\",\r\n@@ -569,16 +569,16 @@\n     var editProdiInput = document.querySelector('#edit_prodi');\r\n     var tagifyEditProdi = new Tagify(editProdiInput, {\r\n         whitelist: [\r\n             <?php\r\n-            $sql_prodi = \"SELECT id, nama_prodi FROM prodis\";\r\n-            $stmt_prodi = $pdo->query($sql_prodi);\r\n-            $prodiArray = [];\r\n-            while ($prodi = $stmt_prodi->fetch(PDO::FETCH_ASSOC)) {\r\n-                $prodiArray[] = \"{id: '\" . $prodi['id'] . \"', value: '\" . $prodi['nama_prodi'] . \"'}\";\r\n-            }\r\n-            echo implode(\",\", $prodiArray);\r\n-            ?>\r\n+                $sql_prodi = \"SELECT id, nama_prodi FROM prodis\";\r\n+                $stmt_prodi = $pdo->query($sql_prodi);\r\n+                $prodiArray = [];\r\n+                while ($prodi = $stmt_prodi->fetch(PDO::FETCH_ASSOC)) {\r\n+                    $prodiArray[] = \"{id: '\" . $prodi['id'] . \"', value: '\" . $prodi['nama_prodi'] . \"'}\";\r\n+                }\r\n+                echo implode(\",\", $prodiArray);\r\n+                ?>\r\n         ],\r\n         dropdown: {\r\n             maxItems: 20,\r\n             classname: \"tags-look\",\r\n"
                },
                {
                    "date": 1721748448468,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -170,9 +170,9 @@\n                         </button>\r\n                     </div>\r\n                     <?php unset($_SESSION['error_message']); // Clear error message after displaying ?>\r\n                     <?php endif; ?>\r\n-                    </div>\r\n+                </div>\r\n             </div>\r\n             <Fig></Fig>\r\n \r\n             <section class=\"content\">\r\n@@ -540,8 +540,39 @@\n             closeOnSelect: false\r\n         }\r\n     });\r\n \r\n+    document.addEventListener('DOMContentLoaded', function() {\r\n+        const modalEdit = document.getElementById('modalEdit');\r\n+        modalEdit.addEventListener('show.bs.modal', function(event) {\r\n+            const button = event.relatedTarget;\r\n+            const id = button.getAttribute('data-bs-id');\r\n+            const namaPekerjaan = button.getAttribute('data-bs-nama_pekerjaan');\r\n+            const posisi = button.getAttribute('data-bs-posisi');\r\n+            const kualifikasi = button.getAttribute('data-bs-kualifikasi');\r\n+            const jobdesk = button.getAttribute('data-bs-jobdesk');\r\n+            const rangeGajih = button.getAttribute('data-bs-range_gajih');\r\n+            const jenisKerja = button.getAttribute('data-bs-jenis_kerja');\r\n+            const sistemKerja = button.getAttribute('data-bs-sistem_kerja');\r\n+            const prodi = button.getAttribute('data-bs-prodi');\r\n+            const keahlian = button.getAttribute('data-bs-keahlian');\r\n+            const batasWaktu = button.getAttribute('data-bs-batas_waktu');\r\n+\r\n+            document.getElementById('edit_id').value = id;\r\n+            document.getElementById('edit_nama_pekerjaan').value = namaPekerjaan;\r\n+            document.getElementById('edit_posisi').value = posisi;\r\n+            document.getElementById('edit_kualifikasi').value = kualifikasi;\r\n+            document.getElementById('edit_jobdesk').value = jobdesk;\r\n+            document.getElementById('edit_range_gajih').value = rangeGajih;\r\n+            document.getElementById('edit_jenis_kerja').value = jenisKerja;\r\n+            document.getElementById('edit_sistem_kerja').value = sistemKerja;\r\n+            document.getElementById('edit_prodi').value = prodi;\r\n+            document.getElementById('edit_keahlian').value = keahlian;\r\n+            document.getElementById('edit_batas_waktu').value = batasWaktu;\r\n+        });\r\n+    });\r\n+\r\n+\r\n     $('#editAddTagButton').on('click', function() {\r\n         tagifyEditKeahlian.addEmptyTag();\r\n     });\r\n \r\n"
                }
            ],
            "date": 1721747831610,
            "name": "Commit-0",
            "content": "<?php\r\nsession_start();\r\nif (!isset($_SESSION['user_id']) || $_SESSION['role'] !== 'perusahaan') {\r\n    header('Location: ../auth/login.php');\r\n    exit;\r\n}\r\n\r\ninclude '../includes/db.php';\r\n\r\n$success_message = '';\r\nif (isset($_SESSION['success_message'])) {\r\n    $success_message = $_SESSION['success_message'];\r\n    unset($_SESSION['success_message']); \r\n}\r\n\r\n// Fungsi untuk mengambil semua lowongan pekerjaan dari database\r\nfunction fetchJobs($pdo)\r\n{\r\n    try {\r\n        $sql = \"SELECT * FROM lowongan_kerja\";\r\n        $stmt = $pdo->query($sql);\r\n        return $stmt->fetchAll(PDO::FETCH_ASSOC);\r\n    } catch (PDOException $e) {\r\n        echo \"Error fetching jobs: \" . $e->getMessage();\r\n        return false;\r\n    }\r\n}\r\n\r\n// Fungsi untuk mengambil semua prodi dari database\r\nfunction fetchProdi($pdo)\r\n{\r\n    try {\r\n        $sql = \"SELECT id, nama_prodi FROM prodis\";\r\n        $stmt = $pdo->query($sql);\r\n        return $stmt->fetchAll(PDO::FETCH_ASSOC);\r\n    } catch (PDOException $e) {\r\n        echo \"Error fetching prodi: \" . $e->getMessage();\r\n        return false;\r\n    }\r\n}\r\n\r\n// Mengambil semua prodi\r\n$prodiList = fetchProdi($pdo);\r\n\r\n// Mengambil semua lowongan pekerjaan\r\n$jobs = fetchJobs($pdo);\r\n\r\n?>\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Perusahaan Dashboard</title>\r\n    <link rel=\"stylesheet\" href=\"../app/plugins/fontawesome-free/css/all.min.css\">\r\n    <link rel=\"stylesheet\" href=\"../app/dist/css/adminlte.min.css\">\r\n    <link rel=\"stylesheet\" href=\"../app/plugins/datatables-bs4/css/dataTables.bootstrap4.min.css\">\r\n    <link rel=\"stylesheet\" href=\"../app/plugins/datatables-responsive/css/responsive.bootstrap4.min.css\">\r\n    <link rel=\"stylesheet\" href=\"../app/plugins/datatables-buttons/css/buttons.bootstrap4.min.css\">\r\n    <link href=\"https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700\" rel=\"stylesheet\">\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/@yaireo/tagify/dist/tagify.css\">\r\n    <style>\r\n    /* Custom CSS */\r\n    .nav-sidebar .nav-link.active {\r\n        background-color: #343a40 !important;\r\n    }\r\n\r\n    .content-wrapper {\r\n        margin-top: 20px;\r\n    }\r\n\r\n    .table-responsive {\r\n        overflow-y: auto;\r\n        max-height: 400px;\r\n    }\r\n\r\n    .table-responsive thead {\r\n        position: sticky;\r\n        top: 0;\r\n        z-index: 1;\r\n        background-color: #343a40;\r\n    }\r\n\r\n    .table-responsive thead th {\r\n        color: #ffffff;\r\n        border-color: #454d55;\r\n    }\r\n\r\n    .table-responsive tbody tr:hover {\r\n        background-color: #f2f2f2;\r\n    }\r\n\r\n    .tagify_tag_removeBtn {\r\n        color: #fff;\r\n        margin-left: 5px;\r\n    }\r\n\r\n    .input-group .form-control {\r\n        border-right: 0;\r\n    }\r\n\r\n    .input-group-append .btn {\r\n        border-left: 0;\r\n    }\r\n\r\n    .tag-input {\r\n        min-height: 38px;\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n    }\r\n\r\n    .tag-input-wrapper {\r\n        position: relative;\r\n        width: 100%;\r\n    }\r\n\r\n    .tag-input {\r\n        min-height: 38px;\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        align-items: center;\r\n        border: 1px solid #ced4da;\r\n        padding: 6px;\r\n        border-radius: 0.25rem;\r\n        background-color: #fff;\r\n        overflow: hidden;\r\n    }\r\n\r\n    .tagify__tag {\r\n        margin: 2px;\r\n    }\r\n\r\n    textarea {\r\n        min-height: 80px;\r\n        width: 100%;\r\n    }\r\n\r\n    /* CSS tambahan untuk memastikan modal mencakup panjang tabel */\r\n    .modal-lg {\r\n        max-width: 90%;\r\n    }\r\n\r\n    .modal-body {\r\n        overflow-x: auto;\r\n    }\r\n    </style>\r\n</head>\r\n\r\n<body class=\"hold-transition sidebar-mini layout-fixed layout-navbar-fixed layout-footer-fixed\">\r\n    <div class=\"wrapper\">\r\n        <?php include 'navbar_perusahaan.php'; ?>\r\n\r\n        <div class=\"content-wrapper\">\r\n            <div class=\"content-header\">\r\n                <div class=\"container-fluid\">\r\n                    <?php if (!empty($success_message)) : ?>\r\n                    <div class=\"alert alert-success alert-dismissible fade show\" role=\"alert\">\r\n                        <?php echo $success_message; ?>\r\n                        <button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\r\n                            <span aria-hidden=\"true\">&times;</span>\r\n                        </button>\r\n                    </div>\r\n                    <?php endif; ?>\r\n                    <?php if (!empty($_SESSION['error_message'])) : ?>\r\n                    <div class=\"alert alert-danger alert-dismissible fade show\" role=\"alert\">\r\n                        <?php echo $_SESSION['error_message']; ?>\r\n                        <button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\r\n                            <span aria-hidden=\"true\">&times;</span>\r\n                        </button>\r\n                    </div>\r\n                    <?php unset($_SESSION['error_message']); // Clear error message after displaying ?>\r\n                    <?php endif; ?>\r\n                </div>\r\n            </div>\r\n            <Fig></Fig>\r\n\r\n            <section class=\"content\">\r\n                <div class=\"container-fluid\">\r\n                    <div class=\"card\">\r\n                        <div class=\"card-header\">\r\n                            <h3 class=\"card-title\"><i class=\"fas fa-briefcase\"></i> Lowongan Pekerjaan</h3>\r\n                            <div class=\"card-tools\">\r\n                                <button class=\"btn btn-primary add-button\" data-toggle=\"modal\"\r\n                                    data-target=\"#modalTambah\">\r\n                                    <i class=\"fas fa-plus-circle\"></i> Tambah\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"card-body\">\r\n                            <div class=\"table-responsive\">\r\n                                <table id=\"lowonganTable\" class=\"table table-bordered table-striped\">\r\n                                    <thead>\r\n                                        <tr>\r\n                                            <th>No</th>\r\n                                            <th>Nama Pekerjaan</th>\r\n                                            <th>Posisi</th>\r\n                                            <th>Kualifikasi</th>\r\n                                            <th>Jobdesk</th>\r\n                                            <th>Range Gaji</th>\r\n                                            <th>Jenis Kerja</th>\r\n                                            <th>Sistem Kerja</th>\r\n                                            <th>Prodi</th>\r\n                                            <th>Keahlian</th>\r\n                                            <th>Batas Waktu</th>\r\n                                            <th>Tanggal Posting</th>\r\n                                            <th>Aksi</th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                        <?php\r\n    if ($jobs) {\r\n        $no = 1;\r\n        foreach ($jobs as $row) {\r\n            echo \"<tr>\";\r\n            echo \"<td>\" . $no . \"</td>\";\r\n            echo \"<td>\" . htmlspecialchars($row['nama_pekerjaan']) . \"</td>\";\r\n            echo \"<td>\" . htmlspecialchars($row['posisi']) . \"</td>\";\r\n            echo \"<td>\" . htmlspecialchars($row['kualifikasi']) . \"</td>\";\r\n            echo \"<td>\" . htmlspecialchars($row['jobdesk']) . \"</td>\";\r\n            echo \"<td>\" . htmlspecialchars($row['range_gajih']) . \"</td>\";\r\n            echo \"<td>\" . htmlspecialchars($row['jenis_kerja']) . \"</td>\";\r\n            echo \"<td>\" . htmlspecialchars($row['sistem_kerja']) . \"</td>\";\r\n\r\n            // Decode JSON prodi dan keahlian\r\n            $prodi = !empty($row['prodi']) ? json_decode($row['prodi'], true) : [];\r\n            $keahlian = !empty($row['keahlian']) ? json_decode($row['keahlian'], true) : [];\r\n\r\n            if (is_array($prodi)) {\r\n                $prodi_list = array_map(function ($item) {\r\n                    return $item['value'];\r\n                }, $prodi);\r\n                echo \"<td>\" . htmlspecialchars(implode(', ', $prodi_list)) . \"</td>\";\r\n            } else {\r\n                echo \"<td>-</td>\"; // Tampilkan tanda \"-\" jika tidak ada data\r\n            }\r\n\r\n            if (is_array($keahlian)) {\r\n                $keahlian_list = array_map(function ($item) {\r\n                    return $item['value'];\r\n                }, $keahlian);\r\n                echo \"<td>\" . htmlspecialchars(implode(', ', $keahlian_list)) . \"</td>\";\r\n            } else {\r\n                echo \"<td>-</td>\"; // Tampilkan tanda \"-\" jika tidak ada data\r\n            }\r\n            \r\n            echo \"<td>\" . htmlspecialchars($row['batas_waktu']) . \"</td>\";\r\n            echo \"<td>\" . htmlspecialchars($row['tanggal_posting']) . \"</td>\";\r\n            echo \"<td>\r\n                <button class='btn btn-sm btn-warning editBtn' data-toggle='modal' data-target='#modalEdit' \r\n                    data-id='\" . $row['id'] . \"' \r\n                    data-nama='\" . htmlspecialchars($row['nama_pekerjaan']) . \"' \r\n                    data-posisi='\" . htmlspecialchars($row['posisi']) . \"'\r\n                    data-kualifikasi='\" . htmlspecialchars($row['kualifikasi']) . \"'\r\n                    data-jobdesk='\" . htmlspecialchars($row['jobdesk']) . \"'\r\n                    data-range_gajih='\" . htmlspecialchars($row['range_gajih']) . \"'\r\n                    data-jenis_kerja='\" . htmlspecialchars($row['jenis_kerja']) . \"'\r\n                    data-sistem_kerja='\" . htmlspecialchars($row['sistem_kerja']) . \"'\r\n                    data-prodi='\" . htmlspecialchars(json_encode($prodi)) . \"'\r\n                    data-keahlian='\" . htmlspecialchars(json_encode($keahlian)) . \"'\r\n                    data-waktu='\" . htmlspecialchars($row['batas_waktu']) . \"'>Edit</button>\r\n                <button class='btn btn-sm btn-danger deleteBtn' data-toggle='modal' data-target='#modalHapus' data-id='\" . $row['id'] . \"'>Hapus</button>\r\n                <button class='btn btn-sm btn-info lihatPelamarBtn' data-toggle='modal' data-target='#modalPelamar' data-id='\" . $row['id'] . \"'>Lihat Pelamar</button>\r\n            </td>\";\r\n            echo \"</tr>\";\r\n            $no++;\r\n        }\r\n    } else {\r\n        echo \"<tr><td colspan='13'>Tidak ada data</td></tr>\";\r\n    }\r\n    ?>\r\n                                    </tbody>\r\n\r\n                                </table>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </div>\r\n\r\n        <!-- Modal Tambah -->\r\n        <div class=\"modal fade\" id=\"modalTambah\" tabindex=\"-1\" aria-labelledby=\"modalTambahLabel\" aria-hidden=\"true\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <form action=\"process_add_job.php\" method=\"post\">\r\n                        <div class=\"modal-header\">\r\n                            <h5 class=\"modal-title\" id=\"modalTambahLabel\">Tambah Lowongan Pekerjaan</h5>\r\n                            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                <span aria-hidden=\"true\">&times;</span>\r\n                            </button>\r\n                        </div>\r\n                        <div class=\"modal-body\">\r\n                            <div class=\"form-group\">\r\n                                <label for=\"nama_pekerjaan\">Nama Pekerjaan</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"nama_pekerjaan\" name=\"nama_pekerjaan\"\r\n                                    required>\r\n                            </div>\r\n                            <div class=\"form-group\">\r\n                                <label for=\"posisi\">Posisi</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"posisi\" name=\"posisi\" required>\r\n                            </div>\r\n                            <div class=\"form-group\">\r\n                                <label for=\"kualifikasi\">Kualifikasi</label>\r\n                                <textarea class=\"form-control\" id=\"kualifikasi\" name=\"kualifikasi\" rows=\"3\"\r\n                                    required></textarea>\r\n                            </div>\r\n                            <div class=\"form-group\">\r\n                                <label for=\"jobdesk\">Jobdesk</label>\r\n                                <textarea class=\"form-control\" id=\"jobdesk\" name=\"jobdesk\" rows=\"3\" required></textarea>\r\n                            </div>\r\n                            <div class=\"form-group\">\r\n                                <label for=\"range_gajih\">Range Gaji</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"range_gajih\" name=\"range_gajih\" required>\r\n                            </div>\r\n                            <div class=\"form-group\">\r\n                                <label for=\"jenis_kerja\">Jenis Kerja</label>\r\n                                <select class=\"form-control\" id=\"jenis_kerja\" name=\"jenis_kerja\" required>\r\n                                    <option value=\"full-time\">Full-time</option>\r\n                                    <option value=\"part-time\">Part-time</option>\r\n                                    <option value=\"freelance\">Freelance</option>\r\n                                </select>\r\n                            </div>\r\n                            <div class=\"form-group\">\r\n                                <label for=\"sistem_kerja\">Sistem Kerja</label>\r\n                                <select class=\"form-control\" id=\"sistem_kerja\" name=\"sistem_kerja\" required>\r\n                                    <option value=\"Work From Home\">Work From Home</option>\r\n                                    <option value=\"Work From Anywhere\">Work From Anywhere</option>\r\n                                    <option value=\"Office\">Office</option>\r\n                                </select>\r\n                            </div>\r\n                            <div class=\"form-group\">\r\n                                <label for=\"prodi\">Prodi</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"prodi\" name=\"prodi\" required>\r\n                            </div>\r\n                            <div class=\"form-group\">\r\n                                <label for=\"keahlian\">Keahlian</label>\r\n                                <div class=\"input-group\">\r\n                                    <input type=\"text\" class=\"form-control\" id=\"keahlian\" name=\"keahlian\" required>\r\n                                    <div class=\"input-group-append\">\r\n                                        <button class=\"btn btn-outline-secondary\" type=\"button\"\r\n                                            id=\"addTagButton\">+</button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"form-group\">\r\n                                <label for=\"batas_waktu\">Batas Waktu</label>\r\n                                <input type=\"date\" class=\"form-control\" id=\"batas_waktu\" name=\"batas_waktu\" required>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"modal-footer\">\r\n                            <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\r\n                            <button type=\"submit\" class=\"btn btn-primary\">Simpan</button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Modal Edit -->\r\n        <div class=\"modal fade\" id=\"modalEdit\" tabindex=\"-1\" aria-labelledby=\"modalEditLabel\" aria-hidden=\"true\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <form action=\"process_update_job.php\" method=\"post\">\r\n                        <div class=\"modal-header\">\r\n                            <h5 class=\"modal-title\" id=\"modalEditLabel\">Edit Lowongan Pekerjaan</h5>\r\n                            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                <span aria-hidden=\"true\">&times;</span>\r\n                            </button>\r\n                        </div>\r\n                        <div class=\"modal-body\">\r\n                            <input type=\"hidden\" id=\"edit_id\" name=\"edit_id\">\r\n                            <div class=\"form-group\">\r\n                                <label for=\"edit_nama_pekerjaan\">Nama Pekerjaan</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"edit_nama_pekerjaan\"\r\n                                    name=\"edit_nama_pekerjaan\" required>\r\n                            </div>\r\n                            <div class=\"form-group\">\r\n                                <label for=\"edit_posisi\">Posisi</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"edit_posisi\" name=\"edit_posisi\" required>\r\n                            </div>\r\n                            <div class=\"form-group\">\r\n                                <label for=\"edit_kualifikasi\">Kualifikasi</label>\r\n                                <textarea class=\"form-control\" id=\"edit_kualifikasi\" name=\"edit_kualifikasi\" rows=\"3\"\r\n                                    required></textarea>\r\n                            </div>\r\n                            <div class=\"form-group\">\r\n                                <label for=\"edit_jobdesk\">Jobdesk</label>\r\n                                <textarea class=\"form-control\" id=\"edit_jobdesk\" name=\"edit_jobdesk\" rows=\"3\"\r\n                                    required></textarea>\r\n                            </div>\r\n                            <div class=\"form-group\">\r\n                                <label for=\"edit_range_gajih\">Range Gaji</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"edit_range_gajih\" name=\"edit_range_gajih\"\r\n                                    required>\r\n                            </div>\r\n                            <div class=\"form-group\">\r\n                                <label for=\"edit_jenis_kerja\">Jenis Kerja</label>\r\n                                <select class=\"form-control\" id=\"edit_jenis_kerja\" name=\"edit_jenis_kerja\" required>\r\n                                    <option value=\"full-time\">Full-time</option>\r\n                                    <option value=\"part-time\">Part-time</option>\r\n                                    <option value=\"freelance\">Freelance</option>\r\n                                </select>\r\n                            </div>\r\n                            <div class=\"form-group\">\r\n                                <label for=\"edit_sistem_kerja\">Sistem Kerja</label>\r\n                                <select class=\"form-control\" id=\"edit_sistem_kerja\" name=\"edit_sistem_kerja\" required>\r\n                                    <option value=\"Work From Home\">Work From Home</option>\r\n                                    <option value=\"Work From Anywhere\">Work From Anywhere</option>\r\n                                    <option value=\"Office\">Office</option>\r\n                                </select>\r\n                            </div>\r\n                            <div class=\"form-group\">\r\n                                <label for=\"edit_prodi\">Prodi</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"edit_prodi\" name=\"edit_prodi\" required>\r\n                            </div>\r\n                            <div class=\"form-group\">\r\n                                <label for=\"edit_keahlian\">Keahlian</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"edit_keahlian\" name=\"edit_keahlian\"\r\n                                    required>\r\n                            </div>\r\n                            <div class=\"form-group\">\r\n                                <label for=\"edit_batas_waktu\">Batas Waktu</label>\r\n                                <input type=\"date\" class=\"form-control\" id=\"edit_batas_waktu\" name=\"edit_batas_waktu\"\r\n                                    required>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"modal-footer\">\r\n                            <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\r\n                            <button type=\"submit\" class=\"btn btn-primary\">Simpan Perubahan</button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n\r\n        <!-- Modal untuk Hapus -->\r\n        <div class=\"modal fade\" id=\"modalHapus\" tabindex=\"-1\" aria-labelledby=\"modalHapusLabel\" aria-hidden=\"true\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <form action=\"process_delete_job.php\" method=\"post\">\r\n                        <div class=\"modal-header\">\r\n                            <h5 class=\"modal-title\" id=\"modalHapusLabel\">Hapus Lowongan Pekerjaan</h5>\r\n                            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                <span aria-hidden=\"true\">&times;</span>\r\n                            </button>\r\n                        </div>\r\n                        <div class=\"modal-body\">\r\n                            <input type=\"hidden\" id=\"hapus_id\" name=\"hapus_id\">\r\n                            <p>Apakah Anda yakin ingin menghapus lowongan ini?</p>\r\n                        </div>\r\n                        <div class=\"modal-footer\">\r\n                            <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Tutup</button>\r\n                            <button type=\"submit\" class=\"btn btn-danger\">Hapus</button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Modal Lihat Pelamar -->\r\n        <div class=\"modal fade\" id=\"modalPelamar\" tabindex=\"-1\" aria-labelledby=\"modalPelamarLabel\" aria-hidden=\"true\">\r\n            <div class=\"modal-dialog modal-lg\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"modalPelamarLabel\">Daftar Pelamar</h5>\r\n                        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                            <span aria-hidden=\"true\">&times;</span>\r\n                        </button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <div style=\"overflow-x:auto;\">\r\n                            <table class=\"table table-bordered\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>No</th>\r\n                                        <th>Nama Pelamar</th>\r\n                                        <th>Email</th>\r\n                                        <th>No Telepon</th>\r\n                                        <th>Program Studi</th>\r\n                                        <th>Status</th>\r\n                                        <th>Pesan</th>\r\n                                        <th>Aksi</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody id=\"pelamarTableBody\">\r\n                                    <!-- Data pelamar akan dimuat di sini melalui AJAX -->\r\n                                </tbody>\r\n                            </table>\r\n\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n\r\n    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js\"></script>\r\n    <script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js\"></script>\r\n    <script src=\"https://cdn.jsdelivr.net/npm/@yaireo/tagify@4.9.7/dist/tagify.min.js\"></script>\r\n    <script src=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js\"></script>\r\n    <script src=\"../app/plugins/fontawesome-free/js/all.min.js\"></script>\r\n    <script src=\"../app/dist/js/adminlte.min.js\"></script>\r\n    <script src=\"../app/plugins/datatables/jquery.dataTables.min.js\"></script>\r\n    <script src=\"../app/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js\"></script>\r\n    <script src=\"../app/plugins/datatables-responsive/js/dataTables.responsive.min.js\"></script>\r\n    <script src=\"../app/plugins/datatables-responsive/js/responsive.bootstrap4.min.js\"></script>\r\n    <script src=\"../app/plugins/datatables-buttons/js/dataTables.buttons.min.js\"></script>\r\n    <script src=\"../app/plugins/datatables-buttons/js/buttons.bootstrap4.min.js\"></script>\r\n    <script src=\"../app/plugins/jszip/jszip.min.js\"></script>\r\n    <script src=\"../app/plugins/pdfmake/pdfmake.min.js\"></script>\r\n    <script src=\"../app/plugins/pdfmake/vfs_fonts.js\"></script>\r\n    <script src=\"../app/plugins/datatables-buttons/js/buttons.html5.min.js\"></script>\r\n    <script src=\"../app/plugins/datatables-buttons/js/buttons.print.min.js\"></script>\r\n    <script src=\"../app/plugins/datatables-buttons/js/buttons.colVis.min.js\"></script>\r\n    <script>\r\n    var keahlianInput = document.querySelector('#keahlian');\r\n    var tagifyKeahlian = new Tagify(keahlianInput, {\r\n        dropdown: {\r\n            maxItems: 20,\r\n            classname: \"tags-look\",\r\n            enabled: 0,\r\n            closeOnSelect: false\r\n        }\r\n    });\r\n\r\n    $('#addTagButton').on('click', function() {\r\n        tagifyKeahlian.addEmptyTag();\r\n    });\r\n\r\n    var editKeahlianInput = document.querySelector('#edit_keahlian');\r\n    var tagifyEditKeahlian = new Tagify(editKeahlianInput, {\r\n        dropdown: {\r\n            maxItems: 20,\r\n            classname: \"tags-look\",\r\n            enabled: 0,\r\n            closeOnSelect: false\r\n        }\r\n    });\r\n\r\n    $('#editAddTagButton').on('click', function() {\r\n        tagifyEditKeahlian.addEmptyTag();\r\n    });\r\n\r\n    var prodiInput = document.querySelector('#prodi');\r\n    var tagifyProdi = new Tagify(prodiInput, {\r\n        whitelist: [\r\n            <?php\r\n            $sql_prodi = \"SELECT id, nama_prodi FROM prodis\";\r\n            $stmt_prodi = $pdo->query($sql_prodi);\r\n            $prodiArray = [];\r\n            while ($prodi = $stmt_prodi->fetch(PDO::FETCH_ASSOC)) {\r\n                $prodiArray[] = \"{id: '\" . $prodi['id'] . \"', value: '\" . $prodi['nama_prodi'] . \"'}\";\r\n            }\r\n            echo implode(\",\", $prodiArray);\r\n            ?>\r\n        ],\r\n        dropdown: {\r\n            maxItems: 20,\r\n            classname: \"tags-look\",\r\n            enabled: 0,\r\n            closeOnSelect: false\r\n        }\r\n    });\r\n\r\n    var editProdiInput = document.querySelector('#edit_prodi');\r\n    var tagifyEditProdi = new Tagify(editProdiInput, {\r\n        whitelist: [\r\n            <?php\r\n            $sql_prodi = \"SELECT id, nama_prodi FROM prodis\";\r\n            $stmt_prodi = $pdo->query($sql_prodi);\r\n            $prodiArray = [];\r\n            while ($prodi = $stmt_prodi->fetch(PDO::FETCH_ASSOC)) {\r\n                $prodiArray[] = \"{id: '\" . $prodi['id'] . \"', value: '\" . $prodi['nama_prodi'] . \"'}\";\r\n            }\r\n            echo implode(\",\", $prodiArray);\r\n            ?>\r\n        ],\r\n        dropdown: {\r\n            maxItems: 20,\r\n            classname: \"tags-look\",\r\n            enabled: 0,\r\n            closeOnSelect: false\r\n        }\r\n    });\r\n\r\n    $('#addProdiButton').on('click', function() {\r\n        tagifyProdi.addEmptyTag();\r\n    });\r\n\r\n    $('#editAddProdiButton').on('click', function() {\r\n        tagifyEditProdi.addEmptyTag();\r\n    });\r\n\r\n    $('#modalTambah').on('show.bs.modal', function(event) {\r\n        var modal = $(this);\r\n        modal.find('#nama_pekerjaan').val('');\r\n        modal.find('#posisi').val('');\r\n        modal.find('#kualifikasi').val('');\r\n        modal.find('#prodi').val('');\r\n        modal.find('#keahlian').val('');\r\n        modal.find('#jobdesk').val('');\r\n        modal.find('#range_gajih').val('');\r\n        modal.find('#jenis_kerja').val('');\r\n        modal.find('#sistem_kerja').val('');\r\n        modal.find('#batas_waktu').val('');\r\n    });\r\n\r\n    $('#modalEdit').on('show.bs.modal', function(event) {\r\n        var button = $(event.relatedTarget);\r\n        var id = button.data('id');\r\n        var nama = button.data('nama');\r\n        var posisi = button.data('posisi');\r\n        var kualifikasi = button.data('kualifikasi');\r\n        var jobdesk = button.data('jobdesk');\r\n        var range_gajih = button.data('range_gajih');\r\n        var jenis_kerja = button.data('jenis_kerja');\r\n        var sistem_kerja = button.data('sistem_kerja');\r\n        var waktu = button.data('waktu');\r\n\r\n        // Access prodi and keahlian as JSON strings directly from dataset\r\n        var prodiJson = button.data('prodi');\r\n        var keahlianJson = button.data('keahlian');\r\n\r\n        // Parse JSON strings into JavaScript objects\r\n        var prodi = JSON.parse(prodiJson);\r\n        var keahlian = JSON.parse(keahlianJson);\r\n\r\n        // Convert back to tagify format\r\n        var prodiValues = prodi.map(item => ({\r\n            id: item.id,\r\n            value: item.value\r\n        }));\r\n        var keahlianValues = keahlian.map(item => ({\r\n            id: item.id,\r\n            value: item.value\r\n        }));\r\n\r\n        var modal = $(this);\r\n        modal.find('#edit_id').val(id);\r\n        modal.find('#edit_nama_pekerjaan').val(nama);\r\n        modal.find('#edit_posisi').val(posisi);\r\n        modal.find('#edit_kualifikasi').val(kualifikasi);\r\n        modal.find('#edit_jobdesk').val(jobdesk);\r\n        modal.find('#edit_range_gajih').val(range_gajih);\r\n        modal.find('#edit_jenis_kerja').val(jenis_kerja);\r\n        modal.find('#edit_sistem_kerja').val(sistem_kerja);\r\n        tagifyEditProdi.removeAllTags();\r\n        tagifyEditProdi.addTags(prodiValues);\r\n        tagifyEditKeahlian.removeAllTags();\r\n        tagifyEditKeahlian.addTags(keahlianValues);\r\n        modal.find('#edit_batas_waktu').val(waktu);\r\n    });\r\n\r\n    $('#modalHapus').on('show.bs.modal', function(event) {\r\n        var button = $(event.relatedTarget);\r\n        var id = button.data('id');\r\n\r\n        var modal = $(this);\r\n        modal.find('#hapus_id').val(id);\r\n    });\r\n\r\n    $('#modalPelamar').on('show.bs.modal', function(event) {\r\n        var button = $(event.relatedTarget);\r\n        var id = button.data('id');\r\n\r\n        $.ajax({\r\n            url: 'fetch_applicants.php',\r\n            method: 'GET',\r\n            data: {\r\n                lowongan_id: id\r\n            },\r\n            success: function(response) {\r\n                $('#pelamarTableBody').html(response);\r\n            }\r\n        });\r\n    });\r\n    </script>\r\n\r\n</body>\r\n\r\n</html>"
        }
    ]
}